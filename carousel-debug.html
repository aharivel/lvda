<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Carousel Debug - Docker vs Podman</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 20px;
            background: #f5f5f5;
        }
        .debug-section { 
            background: white; 
            padding: 20px; 
            margin: 20px 0; 
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .slide-test {
            width: 400px;
            height: 200px;
            margin: 10px 0;
            border: 2px solid #ccc;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
        }
        .slide3-test {
            background: linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url(./img/balade.jpg);
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }
        .slide4-test {
            background: linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url(./img/pension-slider.jpg);
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }
        .img-test {
            max-width: 200px;
            height: auto;
            margin: 10px;
            border: 1px solid #ddd;
        }
        .info { 
            background: #e3f2fd; 
            padding: 10px; 
            border-left: 4px solid #2196F3;
            margin: 10px 0;
        }
        .error { 
            background: #ffebee; 
            padding: 10px; 
            border-left: 4px solid #f44336;
            margin: 10px 0;
        }
        .success { 
            background: #e8f5e8; 
            padding: 10px; 
            border-left: 4px solid #4caf50;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>üîç Carousel Image Debug Tool</h1>
    <p><strong>Container Runtime:</strong> <span id="runtime">Detecting...</span></p>
    
    <div class="debug-section">
        <h2>üìã Image File Tests</h2>
        <div id="file-tests"></div>
    </div>

    <div class="debug-section">
        <h2>üé† Carousel Background Image Tests</h2>
        <p>These divs use the same CSS as the carousel slides:</p>
        
        <div class="slide3-test">
            <span>SLIDE 3: Balades (balade.jpg)</span>
        </div>
        
        <div class="slide4-test">
            <span>SLIDE 4: Pension (pension-slider.jpg)</span>
        </div>
        
        <div id="css-info"></div>
    </div>

    <div class="debug-section">
        <h2>üñºÔ∏è Direct Image Access Tests</h2>
        <div id="img-tests"></div>
    </div>

    <div class="debug-section">
        <h2>üåê Network & Browser Info</h2>
        <div id="browser-info"></div>
    </div>

    <script>
        // Test image file accessibility
        const images = [
            'balade.jpg',
            'pension-slider.jpg',
            'diapo-educ.jpg', 
            'diapo-pens.jpg',
            'diap-comp.jpg'
        ];

        function testImageLoad(filename) {
            return new Promise((resolve) => {
                const img = new Image();
                img.onload = () => resolve({ filename, status: 'success', size: `${img.naturalWidth}x${img.naturalHeight}` });
                img.onerror = () => resolve({ filename, status: 'error', size: 'Failed to load' });
                img.src = `./img/${filename}`;
            });
        }

        async function runTests() {
            // Browser info
            document.getElementById('browser-info').innerHTML = `
                <div class="info">
                    <strong>User Agent:</strong> ${navigator.userAgent}<br>
                    <strong>Viewport:</strong> ${window.innerWidth}x${window.innerHeight}<br>
                    <strong>URL:</strong> ${window.location.href}<br>
                    <strong>Timestamp:</strong> ${new Date().toISOString()}
                </div>
            `;

            // Test image loading
            const results = await Promise.all(images.map(testImageLoad));
            
            const fileTestsHtml = results.map(result => {
                const className = result.status === 'success' ? 'success' : 'error';
                return `<div class="${className}">
                    <strong>${result.filename}:</strong> ${result.status} (${result.size})
                </div>`;
            }).join('');
            
            document.getElementById('file-tests').innerHTML = fileTestsHtml;

            // Direct image display
            const imgTestsHtml = results.map(result => {
                if (result.status === 'success') {
                    return `<img src="./img/${result.filename}" alt="${result.filename}" class="img-test" title="${result.filename} - ${result.size}">`;
                } else {
                    return `<div class="error">‚ùå ${result.filename} failed to load</div>`;
                }
            }).join('');
            
            document.getElementById('img-tests').innerHTML = imgTestsHtml;

            // CSS background-image info
            const slide3 = document.querySelector('.slide3-test');
            const slide4 = document.querySelector('.slide4-test');
            const slide3Style = window.getComputedStyle(slide3);
            const slide4Style = window.getComputedStyle(slide4);
            
            document.getElementById('css-info').innerHTML = `
                <div class="info">
                    <strong>Slide 3 Computed Background:</strong> ${slide3Style.backgroundImage}<br>
                    <strong>Slide 4 Computed Background:</strong> ${slide4Style.backgroundImage}
                </div>
            `;
        }

        // Detect container runtime (rough heuristic)
        fetch('./img/balade.jpg', { method: 'HEAD' })
            .then(response => {
                const server = response.headers.get('server') || 'unknown';
                document.getElementById('runtime').textContent = 
                    server.includes('nginx') ? `nginx (${server})` : server;
            })
            .catch(() => {
                document.getElementById('runtime').textContent = 'Detection failed';
            });

        // Run all tests
        runTests();
    </script>
</body>
</html>